/*C2*/SET SCHEMA PUBLIC
CREATE TABLE CRL_ISSUER (\u000a\u0009id CHAR(40) PRIMARY KEY,\u000a\u0009name VARCHAR(300) NOT NULL UNIQUE,\u000a\u0009description VARCHAR(200),\u000a\u0009next_update_timestamp TIMESTAMP NULL\u000a)
CREATE TABLE CRL_DOWNLOAD_ADDRESS (\u000a\u0009address VARCHAR(200) NOT NULL,\u000a\u0009issuer_id CHAR(40) NOT NULL,\u000a\u0009description VARCHAR(200)\u000a)
ALTER TABLE CRL_DOWNLOAD_ADDRESS ADD FOREIGN KEY (issuer_id) REFERENCES CRL_ISSUER(id) ON DELETE CASCADE ON UPDATE CASCADE
ALTER TABLE CRL_DOWNLOAD_ADDRESS ADD PRIMARY KEY (issuer_id, address)
CREATE TABLE UPDATE_LOG (\u000a\u0009id CHAR(40) NOT NULL PRIMARY KEY,\u000a\u0009last_update_timestamp TIMESTAMP NOT NULL,\u000a\u0009update_status CHAR(1) NOT NULL,\u000a\u0009issuer_id CHAR(40) NOT NULL\u000a)
ALTER TABLE UPDATE_LOG ADD FOREIGN KEY (issuer_id) REFERENCES CRL_ISSUER(id) ON DELETE CASCADE ON UPDATE CASCADE
CREATE TABLE REVOKED_CERTIFICATE (\u000a\u0009serial_number BIGINT NOT NULL,\u000a\u0009revocation_timestamp TIMESTAMP NOT NULL,\u000a\u0009revocation_reason VARCHAR(50),\u000a\u0009issuer_id CHAR(40) NOT NULL\u000a)
ALTER TABLE REVOKED_CERTIFICATE ADD FOREIGN KEY (issuer_id) REFERENCES CRL_ISSUER(id) ON DELETE CASCADE ON UPDATE CASCADE
ALTER TABLE REVOKED_CERTIFICATE ADD PRIMARY KEY(issuer_id, serial_number)
DISCONNECT
